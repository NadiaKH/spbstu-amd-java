# Lab 4

Теперь `PipelineManager` должен уметь создавать и запускать много `Pipeline`ов в множество отдельных потоков.

`PipelineManager` создает по одному потоку на каждый `Pipeline` (благо тот реализует `Runnable`) и запускает их.

`Reader` по тому, через какой `DataAccessor` идет в нему обращение может понять, какой именно `Pipeline` запрашивает данные, чтобы выдавать их в нужном порядке (т.е. отдавать через `DataAccessor.get()` пустой `Optional`, если какой-то `Pipeline` пролез без очереди). 

Не забываем, что в выходном файле данные должны быть в правильном порядке. Это само по себе не получится, `Reader` и `Writer` должны это обеспечивать.

Можно было сделать и проще, но нужно чтобы вы поигрались с вложенными классами.

Итоговая архитектура:
[![spbspu-amd-java-lab3.png](https://i.postimg.cc/YSt7S4ff/spbspu-amd-java-lab3.png)](https://postimg.cc/ZWs275QC)

